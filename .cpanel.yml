---
deployment:
  tasks:
    # 1Ô∏è‚É£ Define deployment paths
    - export FRONTEND_PATH=/home/anjonixg/public_html
    - export BACKEND_PATH=/home/anjonixg/backend

    # 2Ô∏è‚É£ Build the Vite + React frontend
    - cd my-company-site
    - npm install --legacy-peer-deps
    - npm run build

    # 3Ô∏è‚É£ Deploy the built frontend to public_html
    - /bin/cp -R dist/* $FRONTEND_PATH

    # 4Ô∏è‚É£ Deploy backend files to backend folder
    - cd ..
    - mkdir -p $BACKEND_PATH
    - /bin/cp -R backend/* $BACKEND_PATH

    # 5Ô∏è‚É£ (Optional) Restart your backend (if using Node.js app)
    #    If you‚Äôre using Passenger or PM2, uncomment the relevant command below:
    # - touch $BACKEND_PATH/tmp/restart.txt
    # - pm2 restart all

    # ‚úÖ Clean log
    - echo "üöÄ Deployment completed successfully!"
